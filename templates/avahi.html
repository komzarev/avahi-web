<!DOCTYPE html>
<html>
<head>
    <title>Avahi v2</title>
    <link href="/static/bootstrap.min.css" rel="stylesheet">
<style>

  body {
      font-family: 'Arial', sans-serif;
  }


</style>
</head>
<body>

    <div class="container my-5">
        <div class="p-3 mb-4 text-bg-secondary rounded-3 text-center">
		<h1 class="mb-0">ПРИБОРЫ В СЕТИ СПЕКТРОН</h1>
	</div>


        <script>
            function save_comment(event, input) {
                event.preventDefault();
                const dev_name = input.getAttribute('name');
                const comment = input.value;

                let all = {};
                all["dev_name"] = dev_name;
                all["comment"] = comment;

                fetch(`/set-comment`, {
                    method: "POST",
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(all)
                }).then(res => {
                    console.log("Save comment response:", res);
                });
            }
        </script>

        <form>
            <div class="table-responsive card rounded-3 ">
                <table class="table table-bordered table-hover rounded-3 border overflow-hidden ">
                    <thead class="table-secondary">
                        <tr>
                            <th>№</th>
                            <th>Образ ОС</th>
                            <th>Версия OC</th>
                            <th>Имя прибора</th>
                            <th>IP Адрес</th>
                            <th>Добавить комментарий</th>
                        </tr>
                    </thead>
                    <tbody class="table-group-divider">
                        {% for row in rows %}
                        <tr>
                            <th scope="row"> {{ loop.index0 + 1 }}</td>
                            {% for cell in row %}
                            <td>{{ cell }}</td>
                            {% endfor %}
                            <td>
                                <input 
                                    type="text" 
                                    class="form-control" 
                                    name="new_name.{{row[2]}}" 
                                    value="{{comments[row[2]]}}"
                                    onkeydown="if (event.key === 'Enter') save_comment(event, this)">
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </form>
        <footer class="mt-5 pt-3 border-top text-center">
            <p class="mb-0">© 2024 Avahi Spectron</p>
            <p class="mt-2">
                <a href="/api" class="text-decoration-none">API</a> |
                <a href="/matrix" class="text-decoration-none">Matrix Theme</a> |
                <a href="/docs" class="text-decoration-none">OpenAPI</a>
            </p>
        </footer>
    </div>

</body>
</html>
